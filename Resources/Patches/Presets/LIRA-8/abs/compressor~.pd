#N canvas 1021 258 244 369 10;
#N canvas 0 23 557 246 hv.envfollow 0;
#X obj 27 145 -~;
#X obj 27 124 sig~ 1;
#X obj 12 187 rpole~;
#X obj 283 12 loadbang;
#X obj 283 33 samplerate~;
#X obj 78 68 *;
#X obj 12 166 *~;
#X obj 12 213 outlet~;
#X obj 192 68 *;
#X text 251 103 temp = abs(in);
#X text 251 163 else;
#X obj 165 110 r~ \$0-env;
#X obj 68 201 s~ \$0-env;
#X text 261 143 env = temp + attack_coeff * (env - temp);
#X text 261 183 env = temp + release_coeff * (env - temp);
#X obj 283 54 / 1000;
#X text 251 80 http://www.musicdsp.org/archive.php?classid=2#97;
#X obj 12 42 inlet~;
#X obj 12 89 abs~;
#N canvas 0 23 427 275 coeff 0;
#X obj 53 55 inlet;
#X obj 53 150 exp;
#X msg 53 172 \$1 10;
#X obj 53 194 line~;
#X obj 53 125 /;
#X msg 53 103 -4.60517 \$1;
#X obj 53 82 max 1;
#X obj 53 216 outlet~;
#X text 109 217 coeff = exp(-1 / (Fs * time_ms));
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 1 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X restore 192 89 pd coeff;
#N canvas 0 23 427 275 coeff 0;
#X obj 53 55 inlet;
#X obj 53 150 exp;
#X msg 53 172 \$1 10;
#X obj 53 194 line~;
#X obj 53 125 /;
#X msg 53 103 -4.60517 \$1;
#X obj 53 82 max 1;
#X obj 53 216 outlet~;
#X text 109 217 coeff = exp(-1 / (Fs * time_ms));
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 1 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X restore 78 89 pd coeff;
#X text 251 122 if (tmp > env);
#N canvas 522 86 480 241 hv.multiplex 0;
#X obj 38 197 outlet~;
#N canvas 467 216 159 96 @hv_obj 0;
#X obj 60 18 inlet~;
#X obj 15 18 inlet~;
#X obj 15 65 outlet~;
#X obj 15 42 *~;
#X connect 0 0 3 1;
#X connect 1 0 3 0;
#X connect 3 0 2 0;
#X restore 38 112 pd @hv_obj __and~f;
#N canvas 467 216 188 166 @hv_obj 0;
#X obj 79 11 inlet~;
#X obj 31 11 inlet~;
#X obj 16 112 outlet~;
#X obj 16 37 sig~ 1;
#X obj 16 61 -~;
#X obj 16 89 *~;
#X connect 0 0 5 1;
#X connect 1 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X restore 162 114 pd @hv_obj __andnot~f;
#N canvas 538 372 182 89 @hv_obj 0;
#X obj 66 18 inlet~;
#X obj 15 18 inlet~;
#X obj 15 65 outlet~;
#X obj 15 42 +~, f 9;
#X connect 0 0 3 1;
#X connect 1 0 3 0;
#X connect 3 0 2 0;
#X restore 38 157 pd @hv_obj __or~f;
#X obj 285 34 inlet~ lhs;
#X obj 384 34 inlet~ rhs;
#X obj 38 34 inlet~ input-a;
#X obj 162 34 inlet~ input-b;
#N canvas 0 23 144 197 @hv_obj 0;
#X obj 23 69 -~;
#X obj 23 94 clip~ -1e-37 0;
#X obj 23 18 inlet~;
#X obj 67 19 inlet~;
#X obj 23 159 outlet~;
#X obj 23 136 *~ 1e+37;
#X obj 23 44 min~;
#X obj 23 115 +~ 1e-37;
#X connect 0 0 1 0;
#X connect 1 0 7 0;
#X connect 2 0 6 0;
#X connect 3 0 6 1;
#X connect 3 0 0 1;
#X connect 5 0 4 0;
#X connect 6 0 0 0;
#X connect 7 0 5 0;
#X restore 285 73 pd @hv_obj __gt~f;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 0 0;
#X connect 4 0 8 0;
#X connect 5 0 8 1;
#X connect 6 0 1 0;
#X connect 7 0 2 1;
#X connect 8 0 2 0;
#X connect 8 0 1 1;
#X restore 78 131 pd hv.multiplex;
#X obj 78 42 inlet;
#X obj 192 42 inlet;
#X text 192 22 release (ms);
#X text 78 22 attack (ms);
#X connect 0 0 6 1;
#X connect 1 0 0 0;
#X connect 2 0 7 0;
#X connect 2 0 12 0;
#X connect 3 0 4 0;
#X connect 4 0 15 0;
#X connect 5 0 20 0;
#X connect 6 0 2 0;
#X connect 8 0 19 0;
#X connect 11 0 22 3;
#X connect 15 0 5 1;
#X connect 15 0 8 1;
#X connect 17 0 18 0;
#X connect 18 0 6 0;
#X connect 18 0 22 2;
#X connect 19 0 22 1;
#X connect 20 0 22 0;
#X connect 22 0 0 1;
#X connect 22 0 2 1;
#X connect 23 0 5 0;
#X connect 24 0 8 0;
#X restore 27 112 pd hv.envfollow;
#X obj 12 31 inlet~;
#X obj 27 133 -~;
#X obj 131 77 inlet;
#X obj 131 98 + 100;
#X obj 131 119 dbtorms;
#X obj 27 154 *~;
#X msg 187 119 1 \$1;
#X obj 187 140 /;
#X obj 187 98 inlet;
#X obj 27 175 +~;
#X obj 27 196 /~;
#X obj 27 217 clip~ 0 1;
#X obj 12 268 *~;
#X obj 70 31 inlet;
#X obj 114 31 inlet;
#X obj 12 289 outlet~;
#X text 12 11 inlet;
#X text 70 11 attack;
#X text 114 11 release;
#X text 131 57 threshold;
#X text 187 78 ratio;
#X obj 27 238 drive~;
#X connect 0 0 2 0;
#X connect 0 0 11 1;
#X connect 1 0 13 0;
#X connect 1 0 0 0;
#X connect 2 0 6 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 2 1;
#X connect 5 0 10 1;
#X connect 6 0 10 0;
#X connect 7 0 8 0;
#X connect 8 0 6 1;
#X connect 9 0 7 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 22 0;
#X connect 13 0 16 0;
#X connect 14 0 0 1;
#X connect 15 0 0 2;
#X connect 22 0 13 1;
