#N canvas 619 77 565 438 12;
#X declare -path else;
#X floatatom 346 105 5 0 0 0 - - - 0;
#X obj 88 179 nbx 5 14 64 1e+37 0 0 empty empty empty 0 -8 0 10 #dcdcdc
#000000 #000000 0 256;
#X obj 202 179 nbx 2 14 1 1e+37 0 0 empty empty empty 0 -8 0 10 #dcdcdc
#000000 #000000 0 256;
#N canvas 353 23 518 586 Hamming 0;
#X text 86 67 1;
#X text 85 182 0;
#X obj 124 406 osc~;
#X obj 124 328 samplerate~;
#X msg 190 375 0.5;
#X obj 124 377 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
#dcdcdc #000000 #000000 0 256;
#X obj 116 293 trigger bang bang bang;
#X obj 116 272 bng 15 250 50 0 empty empty empty 0 -6 0 8 #dcdcdc #000000
#000000;
#X obj 101 76 cnv 15 198 118 empty empty empty 20 12 0 14 #dcdcdc #404040
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-hamming 2048 float 0;
#X coords 0 1 2047 0 200 120 1;
#X restore 100 75 graph;
#X obj 116 246 loadbang;
#X obj 124 352 / 2048;
#X obj 124 447 *~ 0.46;
#X obj 124 470 +~ 0.54;
#X text 207 226 formula:;
#X obj 116 509 tabwrite~ \$0-hamming;
#X text 216 244 (cos(x) * 0.46) + 0.54;
#X text 31 352 window size;
#X connect 2 0 12 0;
#X connect 3 0 11 0;
#X connect 4 0 2 1;
#X connect 5 0 2 0;
#X connect 6 0 15 0;
#X connect 6 1 3 0;
#X connect 6 2 4 0;
#X connect 7 0 6 0;
#X connect 10 0 7 0;
#X connect 11 0 5 0;
#X connect 12 0 13 0;
#X connect 13 0 15 0;
#X restore 163 350 pd Hamming;
#N canvas 131 45 395 514 Cosine 0;
#X text 91 38 1;
#X text 90 153 0;
#X obj 109 283 samplerate~;
#X obj 109 332 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
#dcdcdc #000000 #000000 0 256;
#X obj 101 248 trigger bang bang bang;
#X obj 101 227 bng 15 250 50 0 empty empty empty 0 -6 0 8 #dcdcdc #000000
#000000;
#X obj 106 47 cnv 15 198 118 empty empty empty 20 12 0 14 #dcdcdc #404040
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-cosine 2048 float 0;
#X coords 0 1 2047 0 200 120 1;
#X restore 105 46 graph;
#X obj 101 201 loadbang;
#X obj 109 307 / 2048;
#X obj 109 361 phasor~;
#X obj 101 441 tabwrite~ \$0-cosine;
#X msg 176 327 0;
#X obj 109 385 /~ 2;
#X obj 109 412 sin~;
#X text 189 205 Half the sine wave;
#X connect 2 0 9 0;
#X connect 3 0 10 0;
#X connect 4 0 11 0;
#X connect 4 1 2 0;
#X connect 4 2 12 0;
#X connect 5 0 4 0;
#X connect 8 0 5 0;
#X connect 9 0 3 0;
#X connect 10 0 13 0;
#X connect 12 0 10 1;
#X connect 13 0 14 0;
#X connect 14 0 11 0;
#X restore 330 350 pd Cosine;
#N canvas 195 35 612 504 Welch 0;
#X text 34 27 1;
#X text 33 142 0;
#X text 50 158 0;
#X obj 49 36 cnv 15 198 118 empty empty empty 20 12 0 14 #dcdcdc #404040
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-welch 2048 float 0;
#X coords 0 1 2047 0 200 120 1;
#X restore 48 35 graph;
#X text 239 159 2048;
#X text 179 252 i - N/2;
#X text 190 277 N/2;
#X text 178 259 _______;
#X text 229 238 2;
#X text 79 263 welch (i) = 1 -;
#X obj 310 400 expr 1 - $f1;
#X obj 310 433 tabwrite \$0-welch;
#X obj 403 292 / 2;
#X msg 376 187 2048;
#X obj 376 164 loadbang;
#X obj 310 298 t f f;
#X text 113 302 onde 0 <= i < N;
#X text 148 373 1 - (X/A);
#X text 203 367 2;
#X text 108 350 simplificando:;
#X obj 310 346 /;
#X text 60 326 -----------------------------------;
#X text 218 237 _;
#X text 221 245 |;
#X text 221 253 |;
#X text 221 260 |;
#X text 221 268 |;
#X text 221 275 |;
#X text 213 237 _;
#X text 221 283 |;
#X text 218 282 _;
#X text 213 282 _;
#X text 172 245 |;
#X text 172 253 |;
#X text 172 260 |;
#X text 172 268 |;
#X text 172 275 |;
#X text 174 237 _;
#X text 172 283 |;
#X text 174 282 _;
#X text 179 237 _;
#X text 179 282 _;
#X text 156 397 X = i - N/2;
#X text 165 418 A = N/2;
#X text 119 410 onde:;
#X text 417 322 X;
#X text 456 364 2;
#X text 388 401 1 - (X/A);
#X text 457 395 2;
#X text 416 370 (X/A);
#X text 431 290 A;
#X text 335 346 X/A;
#X obj 376 212 t f f;
#X text 34 216 Formula for a window size of N:;
#X obj 310 321 -;
#X obj 310 271 loop;
#X text 416 187 window size (N);
#X obj 310 370 pow 2;
#X connect 11 0 12 0;
#X connect 13 0 21 1;
#X connect 13 0 55 1;
#X connect 14 0 53 0;
#X connect 15 0 14 0;
#X connect 16 0 55 0;
#X connect 16 1 12 1;
#X connect 21 0 58 0;
#X connect 53 0 56 0;
#X connect 53 1 13 0;
#X connect 55 0 21 0;
#X connect 56 0 16 0;
#X connect 58 0 11 0;
#X restore 163 372 pd Welch;
#N canvas 444 241 589 301 Barlett 0;
#X text 60 82 1;
#X text 59 197 0;
#X obj 75 91 cnv 15 198 118 empty empty empty 20 12 0 14 #dcdcdc #404040
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-barlett 2048 float 0;
#X coords 0 1 2047 0 200 120 1 0 0;
#X restore 74 90 graph;
#X obj 368 236 tabwrite~ \$0-barlett;
#X obj 389 93 samplerate~;
#X obj 389 142 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
#dcdcdc #000000 #000000 0 256;
#X obj 389 117 / 2048;
#X obj 366 65 t b b b;
#X obj 366 39 loadbang;
#X obj 389 197 rescale~;
#X obj 389 168 tri~;
#X msg 450 141 0.75;
#X text 76 29 Simply a triangular function.;
#X connect 5 0 7 0;
#X connect 6 0 11 0;
#X connect 7 0 6 0;
#X connect 8 0 4 0;
#X connect 8 1 5 0;
#X connect 8 2 12 0;
#X connect 9 0 8 0;
#X connect 10 0 4 0;
#X connect 11 0 10 0;
#X connect 12 0 11 1;
#X restore 243 372 pd Barlett;
#N canvas 455 28 352 514 Connes 0;
#X text 49 31 1;
#X text 48 146 0;
#X obj 64 40 cnv 15 198 118 empty empty empty 20 12 0 14 #dcdcdc #404040
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-connes 2048 float 0;
#X coords 0 1 2047 0 200 120 1;
#X restore 63 39 graph;
#X obj 81 416 expr 1 - $f1;
#X obj 147 329 / 2;
#X msg 81 242 2048;
#X obj 81 214 loadbang;
#X obj 81 317 t f f;
#X obj 81 365 /;
#X text 106 365 X/A;
#X obj 81 465 tabwrite \$0-connes;
#X obj 81 294 loop;
#X obj 81 266 t f f;
#X text 202 310 A Welch function raised to the power of 2, f 16;
#X obj 81 340 -;
#X text 121 242 window size;
#X obj 81 441 pow 2;
#X obj 81 389 pow 2;
#X connect 4 0 17 0;
#X connect 5 0 9 1;
#X connect 5 0 15 1;
#X connect 6 0 13 0;
#X connect 7 0 6 0;
#X connect 8 0 15 0;
#X connect 8 1 11 1;
#X connect 9 0 18 0;
#X connect 12 0 8 0;
#X connect 13 0 12 0;
#X connect 13 1 5 0;
#X connect 15 0 9 0;
#X connect 17 0 11 0;
#X connect 18 0 4 0;
#X restore 243 350 pd Connes;
#N canvas 596 122 641 409 Blackman 0;
#X text 44 50 1;
#X text 43 165 0;
#X obj 370 103 samplerate~;
#X obj 370 152 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
#dcdcdc #000000 #000000 0 256;
#X obj 295 68 trigger bang bang bang;
#X obj 295 47 bng 15 250 50 0 empty empty empty 0 -6 0 8 #dcdcdc #000000
#000000;
#X obj 59 59 cnv 15 198 118 empty empty empty 20 12 0 14 #dcdcdc #404040
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-blackman 2048 float 0;
#X coords 0 1 2047 0 200 120 1;
#X restore 58 58 graph;
#X obj 295 21 loadbang;
#X obj 416 332 tabwrite~ \$0-blackman;
#X obj 416 181 phasor~;
#X msg 461 103 0;
#X obj 416 216 cos~;
#X obj 416 240 *~ 0.5;
#X obj 540 239 *~ 2;
#X obj 540 263 cos~;
#X obj 540 289 *~ 0.08;
#X obj 416 290 +~;
#X obj 416 263 expr~ 0.42 - $v1;
#X obj 370 127 / 2048;
#X text 29 285 (0.42 - (cos(x) * 0.5)) + (cos(2x) * 0.08);
#X text 66 252 Formula:;
#X connect 2 0 19 0;
#X connect 3 0 10 0;
#X connect 4 0 9 0;
#X connect 4 1 2 0;
#X connect 4 2 11 0;
#X connect 5 0 4 0;
#X connect 8 0 5 0;
#X connect 10 0 12 0;
#X connect 10 0 14 0;
#X connect 11 0 10 1;
#X connect 12 0 13 0;
#X connect 13 0 18 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 17 1;
#X connect 17 0 9 0;
#X connect 18 0 17 0;
#X connect 19 0 3 0;
#X restore 325 372 pd Blackman;
#N canvas 599 77 611 558 Lanczos 0;
#X text 43 36 1;
#X text 42 151 0;
#X obj 67 356 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
#dcdcdc #000000 #000000 0 256;
#X obj 45 251 bng 15 250 50 0 empty empty empty 0 -6 0 8 #dcdcdc #000000
#000000;
#X obj 58 44 cnv 15 198 118 empty empty empty 20 12 0 14 #dcdcdc #404040
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-lanczos 2048 float 0;
#X coords 0 1 2047 0 200 120 1;
#X restore 57 43 graph;
#X obj 45 225 loadbang;
#X obj 67 385 phasor~;
#X obj 45 516 tabwrite~ \$0-lanczos;
#X msg 157 301 0;
#X obj 67 412 expr~ ($v1 - 0.5) * 2;
#X text 99 485 sin(x)/(x);
#X obj 67 437 expr~ $v1 * pi;
#X obj 196 301 v pi;
#X obj 67 484 /~;
#X obj 67 462 expr~ sin($v1);
#X text 201 225 A normalized sync function;
#X text 290 262 formula: sin(x)/(x);
#X text 283 283 where x is from -pi to pi;
#X obj 196 274 pi;
#X text 222 411 -1 to 1;
#X text 173 436 -pi to pi;
#X obj 45 272 t b b b;
#X obj 68 303 samplerate~;
#X obj 68 330 / 2048;
#X connect 2 0 7 0;
#X connect 3 0 22 0;
#X connect 6 0 3 0;
#X connect 7 0 10 0;
#X connect 9 0 7 1;
#X connect 10 0 12 0;
#X connect 12 0 14 1;
#X connect 12 0 15 0;
#X connect 14 0 8 0;
#X connect 15 0 14 0;
#X connect 19 0 13 0;
#X connect 22 0 8 0;
#X connect 22 1 23 0;
#X connect 22 2 19 0;
#X connect 22 2 9 0;
#X connect 23 0 24 0;
#X connect 24 0 2 0;
#X restore 416 350 pd Lanczos;
#N canvas 687 117 496 629 Gaussian 0;
#X text 119 38 1;
#X text 118 153 0;
#X obj 154 318 samplerate~;
#X obj 154 367 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
#dcdcdc #000000 #000000 0 256;
#X obj 79 289 trigger bang bang bang;
#X obj 79 268 bng 15 250 50 0 empty empty empty 0 -6 0 8 #dcdcdc #000000
#000000;
#X obj 134 46 cnv 15 198 118 empty empty empty 20 12 0 14 #dcdcdc #404040
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-gauss 2048 float 0;
#X coords 0 1 2047 0 200 120 1;
#X restore 133 45 graph;
#X obj 79 242 loadbang;
#X obj 154 342 / 2048;
#X obj 154 396 phasor~;
#X msg 245 318 0;
#X obj 154 420 -~ 0.5;
#X obj 79 559 tabwrite~ \$0-gauss;
#X obj 163 228 hsl 128 15 4 20 0 0 empty empty empty -2 -8 0 10 #dcdcdc
#000000 #000000 0 1;
#X obj 160 254 trigger bang float;
#X text 300 227 X;
#X text 150 186 the X parameter defines the steepness of the curve
, f 26;
#X floatatom 283 435 5 0 0 0 - - - 0;
#X obj 258 494 expr~ exp(-$v1*$v1);
#X obj 258 466 *~ 4;
#X connect 2 0 9 0;
#X connect 3 0 10 0;
#X connect 4 0 13 0;
#X connect 4 1 2 0;
#X connect 4 2 11 0;
#X connect 5 0 4 0;
#X connect 8 0 5 0;
#X connect 9 0 3 0;
#X connect 10 0 12 0;
#X connect 11 0 10 1;
#X connect 12 0 20 0;
#X connect 14 0 15 0;
#X connect 15 0 4 0;
#X connect 15 1 18 0;
#X connect 18 0 20 1;
#X connect 19 0 13 0;
#X connect 20 0 19 0;
#X restore 413 372 pd Gaussian;
#X obj 346 204 out~;
#X text 57 260 OTHER WINDOW TYPES:;
#X text 439 170 <= click;
#X obj 88 205 s \$0-size;
#X obj 202 205 s \$0-overlap;
#X text 213 160 overlaps;
#X text 104 159 window-size;
#X text 29 31 This example allows for a change in the window size and
overlap. Both data are used to calculate the normalization factor.
Open the subpatch to see how it is done., f 39;
#N canvas 247 242 738 435 normalize 0;
#X obj 72 143 rfft~;
#X obj 72 41 inlet~;
#X obj 112 363 outlet~;
#X obj 72 180 rifft~;
#X obj 72 103 hann~;
#X obj 72 220 hann~;
#X obj 460 156 hann~;
#X obj 460 130 sig~ 1;
#X obj 112 282 /~;
#X msg 205 144 set \$1 \$2;
#X obj 237 80 r \$0-overlap;
#X obj 162 78 r \$0-size;
#X obj 205 115 pack2;
#X obj 205 182 block~;
#X obj 281 211 r \$0-overlap;
#X obj 130 240 expr $f1 * $f2 * 0.375;
#X text 143 281 normalization;
#X obj 513 156 r \$0-size;
#X text 384 47 Applying the hann window twice requires a normalization
factor of 0.375 (or 3/8). this value is obtained from an average of
the hann window mupltiplied twice., f 42;
#X obj 130 216 blocksize~;
#X msg 523 189 size \$1;
#X obj 460 226 mov.avg~;
#X text 378 298 Like before \, we get the normalization factor by multiplying
the block size to the overlap number \, but now also to this normalization
factor. Other window types require another factor dependent on the
average., f 42;
#X obj 460 191 *~;
#X obj 460 256 numbox~ 6 12 100 #C0C0C4 #440008 10 0 0 0;
#X connect 0 0 3 0;
#X connect 0 1 3 1;
#X connect 1 0 4 0;
#X connect 3 0 5 0;
#X connect 4 0 0 0;
#X connect 5 0 8 0;
#X connect 6 0 23 0;
#X connect 6 0 23 1;
#X connect 7 0 6 0;
#X connect 8 0 2 0;
#X connect 9 0 13 0;
#X connect 10 0 12 1;
#X connect 11 0 12 0;
#X connect 12 0 9 0;
#X connect 14 0 15 1;
#X connect 15 0 8 1;
#X connect 17 0 20 0;
#X connect 17 0 21 1;
#X connect 19 0 15 0;
#X connect 20 0 21 0;
#X connect 21 0 24 0;
#X connect 23 0 21 0;
#X restore 346 168 pd normalize;
#X obj 202 142 initmess 4;
#X obj 88 140 initmess 2048;
#X obj 390 30 declare -path else;
#X obj 346 135 bl.saw~ 400;
#X text 58 285 Here are other FFT windows commonly used \, though the
hann window is the one we'll use for all the spectral processing examples.
;
#X connect 0 0 23 0;
#X connect 1 0 14 0;
#X connect 2 0 15 0;
#X connect 19 0 11 0;
#X connect 20 0 2 0;
#X connect 21 0 1 0;
#X connect 23 0 19 0;
